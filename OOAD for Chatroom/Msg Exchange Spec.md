消息交换格式
===========
这篇草案描述了消息（暂代指聊天消息）在系统与网络中传递的形式，包括以下三个部分的定义：

1. [编码要求](#1-ch)
2. [单体消息的组织格式](#2-ch)
3. [多个消息的组合形式](#3-ch)

<span id="1-ch">第一部分：编码要求</span>
--------------------------
包含消息的元数据和分隔符在内，所有的字符均使用 ***utf-8*** 编码方式编码~~其实我也很想用 GB18030 编码~~。这样一来我们就支持万国语言在线聊天啦！

<span id="2-ch">第二部分：单体消息的组织格式</span>
--------------------------
遵从以下格式：

    交换消息 => 元数据|消息实质内容
    元数据 => 发送者信息|发送时间（RFC1123）
    发送者信息 => Nick|截取IP的前两段十进制表示

如字面意义上所描述的，每一部分均由符号 `|` 分隔。举例如下：

```
Yahaha|123.456|Thu, 17 May 2018 17:13:51 CST|こにちは、矢羽々です。
```

<span id="3-ch">第三部分：多个消息的组合形式</span>
--------------------------
为了提高负载，有时多条消息会被汇聚在同一个 websocket 数据包中。在这种情况下消息之间使用字符 `\n` 即**换行符**来分隔。举例如下：

```
Yahaha|123.456|Thu, 17 May 2018 17:13:51 CST|こにちは、矢羽々です。\nYahaha|123.456|Thu, 17 May 2018 17:13:51 CST|こにちは、矢羽々です。\nYahaha|123.456|Thu, 17 May 2018 17:13:51 CST|こにちは、矢羽々です。
```
